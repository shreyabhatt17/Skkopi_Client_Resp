import { Directive, EventEmitter, Input, Output, HostListener, InjectionToken, Component, Inject, Injectable, ContentChildren, ContentChild, ElementRef, HostBinding, Optional, Host, SkipSelf, defineInjectable, inject, NgModule } from '@angular/core';
import { FormArray, FormControl, FormGroup, FormControlName, ControlContainer } from '@angular/forms';
import { __spread } from 'tslib';
import { CommonModule } from '@angular/common';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
var FormValidationDirective = /** @class */ (function () {
    function FormValidationDirective() {
        this.validSubmit = new EventEmitter();
    }
    /**
     * @return {?}
     */
    FormValidationDirective.prototype.onSubmit = /**
     * @return {?}
     */
    function () {
        this.markAsTouchedAndDirty(this.formGroup);
        if (this.formGroup.valid) {
            this.validSubmit.emit(this.formGroup.value);
        }
    };
    /**
     * @param {?} control
     * @return {?}
     */
    FormValidationDirective.prototype.markAsTouchedAndDirty = /**
     * @param {?} control
     * @return {?}
     */
    function (control) {
        var _this = this;
        if (control instanceof FormGroup) {
            Object.keys(control.controls).forEach(function (key) {
                return _this.markAsTouchedAndDirty(control.controls[key]);
            });
        }
        else if (control instanceof FormArray) {
            control.controls.forEach(function (c) { return _this.markAsTouchedAndDirty(c); });
        }
        else if (control instanceof FormControl && control.enabled) {
            control.markAsDirty();
            control.markAsTouched();
            control.updateValueAndValidity();
        }
    };
    FormValidationDirective.decorators = [
        { type: Directive, args: [{
                    // tslint:disable-next-line:directive-selector
                    selector: "[formGroup]"
                },] },
    ];
    FormValidationDirective.propDecorators = {
        formGroup: [{ type: Input }],
        validSubmit: [{ type: Output }],
        onSubmit: [{ type: HostListener, args: ["submit",] }]
    };
    return FormValidationDirective;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** @enum {number} */
var BootstrapVersion = {
    Three: 0,
    Four: 1,
};
BootstrapVersion[BootstrapVersion.Three] = 'Three';
BootstrapVersion[BootstrapVersion.Four] = 'Four';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** @type {?} */
var CUSTOM_ERROR_MESSAGES = new InjectionToken("ng-bootstrap-form-validation custom error messages");
/** @type {?} */
var BOOTSTRAP_VERSION = new InjectionToken("ng-bootstrap-form-validation module options");

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
var MessagesComponent = /** @class */ (function () {
    function MessagesComponent(bootstrapVersion) {
        this.bootstrapVersion = bootstrapVersion;
        this.messages = function () { return []; };
    }
    Object.defineProperty(MessagesComponent.prototype, "className", {
        get: /**
         * @return {?}
         */
        function () {
            switch (this.bootstrapVersion) {
                case BootstrapVersion.Three:
                    return "help-block";
                case BootstrapVersion.Four:
                    return "invalid-feedback";
            }
        },
        enumerable: true,
        configurable: true
    });
    MessagesComponent.decorators = [
        { type: Component, args: [{
                    selector: "bfv-messages",
                    template: "\n    <span [ngClass]=\"className\" *ngFor=\"let message of messages()\">{{message}}</span>\n  ",
                    styles: [
                        "\n      .invalid-feedback,\n      .valid-feedback {\n        display: block;\n      }\n    "
                    ]
                },] },
    ];
    /** @nocollapse */
    MessagesComponent.ctorParameters = function () { return [
        { type: BootstrapVersion, decorators: [{ type: Inject, args: [BOOTSTRAP_VERSION,] }] }
    ]; };
    MessagesComponent.propDecorators = {
        messages: [{ type: Input }]
    };
    return MessagesComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** @type {?} */
var DEFAULT_ERRORS = [
    {
        error: "required",
        format: function (label) { return label + " is required"; }
    },
    {
        error: "pattern",
        format: function (label) { return label + " is invalid"; }
    },
    {
        error: "minlength",
        format: function (label, error) {
            return label + " must be at least " + error.requiredLength + " characters";
        }
    },
    {
        error: "maxlength",
        format: function (label, error) {
            return label + " must be no longer than " + error.requiredLength + " characters";
        }
    },
    {
        error: "requiredTrue",
        format: function (label, error) { return label + " is required"; }
    },
    {
        error: "email",
        format: function (label, error) { return "Invalid email address"; }
    },
    {
        error: "max",
        format: function (label, error) { return label + " must be no greater than " + error.max; }
    },
    {
        error: "min",
        format: function (label, error) { return label + " must be no less than " + error.min; }
    }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
var ErrorMessageService = /** @class */ (function () {
    function ErrorMessageService(customErrorMessages) {
        this.customErrorMessages = customErrorMessages;
        this.defaultErrors = DEFAULT_ERRORS;
        this.errorMessages = customErrorMessages.reduce(function (acc, cur) { return acc.concat(cur); }, this.defaultErrors);
    }
    ErrorMessageService.decorators = [
        { type: Injectable, args: [{
                    providedIn: "root"
                },] },
    ];
    /** @nocollapse */
    ErrorMessageService.ctorParameters = function () { return [
        { type: Array, decorators: [{ type: Inject, args: [CUSTOM_ERROR_MESSAGES,] }] }
    ]; };
    /** @nocollapse */ ErrorMessageService.ngInjectableDef = defineInjectable({ factory: function ErrorMessageService_Factory() { return new ErrorMessageService(inject(CUSTOM_ERROR_MESSAGES)); }, token: ErrorMessageService, providedIn: "root" });
    return ErrorMessageService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
var FormGroupComponent = /** @class */ (function () {
    function FormGroupComponent(elRef, errorMessageService) {
        var _this = this;
        this.elRef = elRef;
        this.errorMessageService = errorMessageService;
        this.customErrorMessages = [];
        this.validationDisabled = false;
        this.messages = function () { return _this.getMessages(); };
    }
    Object.defineProperty(FormGroupComponent.prototype, "hasErrors", {
        get: /**
         * @return {?}
         */
        function () {
            return (this.FormControlNames.some(function (c) { return !c.valid && c.dirty && c.touched; }) &&
                !this.validationDisabled);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormGroupComponent.prototype, "hasSuccess", {
        get: /**
         * @return {?}
         */
        function () {
            return (!this.FormControlNames.some(function (c) { return !c.valid; }) &&
                this.FormControlNames.some(function (c) { return c.dirty && c.touched; }) &&
                !this.validationDisabled);
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    FormGroupComponent.prototype.ngAfterContentInit = /**
     * @return {?}
     */
    function () {
        if (this.messagesBlock) {
            this.messagesBlock.messages = this.messages;
        }
    };
    /**
     * @return {?}
     */
    FormGroupComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.errorMessages = this.errorMessageService.errorMessages
            .concat(this.customErrorMessages)
            .reverse();
    };
    Object.defineProperty(FormGroupComponent.prototype, "label", {
        get: /**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var label = this.elRef.nativeElement.querySelector("label");
            return label && label.textContent ? label.textContent.trim() : "This field";
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormGroupComponent.prototype, "isDirtyAndTouched", {
        get: /**
         * @return {?}
         */
        function () {
            return this.FormControlNames.some(function (c) { return c.dirty && c.touched; });
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    FormGroupComponent.prototype.getMessages = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var messages = [];
        if (!this.isDirtyAndTouched || this.validationDisabled) {
            return messages;
        }
        /** @type {?} */
        var names = this.FormControlNames.map(function (f) { return f.name; });
        this.FormControlNames.filter(function (c, i) {
            return !c.valid &&
                !!c.errors &&
                // filter out FormControlNames that share the same name - usually for radio buttons
                names.indexOf(c.name) === i;
        }).forEach(function (control) {
            Object.keys(control.errors).forEach(function (key) {
                /** @type {?} */
                var error = _this.errorMessages.find(function (err) { return err.error === key; });
                if (!error) {
                    return;
                }
                messages.push(error.format(_this.label, control.errors[key]));
            });
        });
        return messages;
    };
    FormGroupComponent.decorators = [
        { type: Component, args: [{
                    // tslint:disable:component-selector
                    selector: ".form-group",
                    template: "\n    <ng-content></ng-content>\n    <bfv-messages *ngIf=\"!messagesBlock\" [messages]=\"messages\"></bfv-messages>\n  "
                },] },
    ];
    /** @nocollapse */
    FormGroupComponent.ctorParameters = function () { return [
        { type: ElementRef },
        { type: ErrorMessageService }
    ]; };
    FormGroupComponent.propDecorators = {
        FormControlNames: [{ type: ContentChildren, args: [FormControlName,] }],
        customErrorMessages: [{ type: Input }],
        validationDisabled: [{ type: Input }],
        hasErrors: [{ type: HostBinding, args: ["class.has-error",] }],
        hasSuccess: [{ type: HostBinding, args: ["class.has-success",] }],
        messagesBlock: [{ type: ContentChild, args: [MessagesComponent,] }]
    };
    return FormGroupComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * @param {?} name
 * @param {?} parent
 * @return {?}
 */
function controlPath(name, parent) {
    // tslint:disable-next-line:no-non-null-assertion
    return __spread(/** @type {?} */ ((parent.path)), [name]);
}
var FormControlDirective = /** @class */ (function () {
    function FormControlDirective(
    // this value might be null, but we union type it as such until
    // this issue is resolved: https://github.com/angular/angular/issues/25544
    parent, bootstrapVersion) {
        this.parent = parent;
        this.bootstrapVersion = bootstrapVersion;
    }
    Object.defineProperty(FormControlDirective.prototype, "validClass", {
        get: /**
         * @return {?}
         */
        function () {
            if (!this.control) {
                return false;
            }
            return (this.bootstrapFour &&
                this.control.valid &&
                (this.control.touched || this.control.dirty));
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormControlDirective.prototype, "invalidClass", {
        get: /**
         * @return {?}
         */
        function () {
            if (!this.control) {
                return false;
            }
            return (this.bootstrapFour &&
                this.control.invalid &&
                this.control.touched &&
                this.control.dirty);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormControlDirective.prototype, "path", {
        get: /**
         * @return {?}
         */
        function () {
            return controlPath(this.formControlName, this.parent);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormControlDirective.prototype, "control", {
        get: /**
         * @return {?}
         */
        function () {
            return this.formDirective && this.formDirective.getControl(this);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormControlDirective.prototype, "formDirective", {
        get: /**
         * @return {?}
         */
        function () {
            return this.parent ? this.parent.formDirective : null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormControlDirective.prototype, "bootstrapFour", {
        get: /**
         * @return {?}
         */
        function () {
            return this.bootstrapVersion === BootstrapVersion.Four;
        },
        enumerable: true,
        configurable: true
    });
    FormControlDirective.decorators = [
        { type: Directive, args: [{
                    // tslint:disable-next-line:directive-selector
                    selector: ".form-control,.form-check-input,.custom-control-input"
                },] },
    ];
    /** @nocollapse */
    FormControlDirective.ctorParameters = function () { return [
        { type: ControlContainer, decorators: [{ type: Optional }, { type: Host }, { type: SkipSelf }] },
        { type: BootstrapVersion, decorators: [{ type: Inject, args: [BOOTSTRAP_VERSION,] }] }
    ]; };
    FormControlDirective.propDecorators = {
        formControlName: [{ type: Input }],
        formControl: [{ type: Input }],
        validClass: [{ type: HostBinding, args: ["class.is-valid",] }],
        invalidClass: [{ type: HostBinding, args: ["class.is-invalid",] }]
    };
    return FormControlDirective;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
var NgBootstrapFormValidationModule = /** @class */ (function () {
    function NgBootstrapFormValidationModule() {
    }
    /**
     * @param {?=} userOptions
     * @return {?}
     */
    NgBootstrapFormValidationModule.forRoot = /**
     * @param {?=} userOptions
     * @return {?}
     */
    function (userOptions) {
        if (userOptions === void 0) { userOptions = {
            bootstrapVersion: BootstrapVersion.Four
        }; }
        return {
            ngModule: NgBootstrapFormValidationModule,
            providers: [
                {
                    provide: CUSTOM_ERROR_MESSAGES,
                    useValue: userOptions.customErrorMessages || [],
                    multi: true
                },
                {
                    provide: BOOTSTRAP_VERSION,
                    useValue: userOptions.bootstrapVersion
                },
                ErrorMessageService
            ]
        };
    };
    NgBootstrapFormValidationModule.decorators = [
        { type: NgModule, args: [{
                    imports: [CommonModule],
                    declarations: [
                        FormValidationDirective,
                        FormGroupComponent,
                        MessagesComponent,
                        FormControlDirective
                    ],
                    exports: [
                        FormValidationDirective,
                        FormGroupComponent,
                        MessagesComponent,
                        FormControlDirective
                    ]
                },] },
    ];
    return NgBootstrapFormValidationModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

export { FormValidationDirective, MessagesComponent, FormGroupComponent, BootstrapVersion, NgBootstrapFormValidationModule, CUSTOM_ERROR_MESSAGES, BOOTSTRAP_VERSION, FormControlDirective as ɵb, ErrorMessageService as ɵa };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmctYm9vdHN0cmFwLWZvcm0tdmFsaWRhdGlvbi5qcy5tYXAiLCJzb3VyY2VzIjpbIm5nOi8vbmctYm9vdHN0cmFwLWZvcm0tdmFsaWRhdGlvbi9saWIvRGlyZWN0aXZlcy9mb3JtLXZhbGlkYXRpb24uZGlyZWN0aXZlLnRzIiwibmc6Ly9uZy1ib290c3RyYXAtZm9ybS12YWxpZGF0aW9uL2xpYi9FbnVtcy9Cb290c3RyYXBWZXJzaW9uLnRzIiwibmc6Ly9uZy1ib290c3RyYXAtZm9ybS12YWxpZGF0aW9uL2xpYi9Ub2tlbnMvdG9rZW5zLnRzIiwibmc6Ly9uZy1ib290c3RyYXAtZm9ybS12YWxpZGF0aW9uL2xpYi9Db21wb25lbnRzL21lc3NhZ2VzL21lc3NhZ2VzLmNvbXBvbmVudC50cyIsIm5nOi8vbmctYm9vdHN0cmFwLWZvcm0tdmFsaWRhdGlvbi9saWIvZGVmYXVsdC1lcnJvcnMudHMiLCJuZzovL25nLWJvb3RzdHJhcC1mb3JtLXZhbGlkYXRpb24vbGliL1NlcnZpY2VzL2Vycm9yLW1lc3NhZ2Uuc2VydmljZS50cyIsIm5nOi8vbmctYm9vdHN0cmFwLWZvcm0tdmFsaWRhdGlvbi9saWIvQ29tcG9uZW50cy9mb3JtLWdyb3VwL2Zvcm0tZ3JvdXAuY29tcG9uZW50LnRzIiwibmc6Ly9uZy1ib290c3RyYXAtZm9ybS12YWxpZGF0aW9uL2xpYi9EaXJlY3RpdmVzL2Zvcm0tY29udHJvbC5kaXJlY3RpdmUudHMiLCJuZzovL25nLWJvb3RzdHJhcC1mb3JtLXZhbGlkYXRpb24vbGliL25nLWJvb3RzdHJhcC1mb3JtLXZhbGlkYXRpb24ubW9kdWxlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIERpcmVjdGl2ZSxcbiAgRXZlbnRFbWl0dGVyLFxuICBJbnB1dCxcbiAgT3V0cHV0LFxuICBIb3N0TGlzdGVuZXJcbn0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcbmltcG9ydCB7XG4gIEFic3RyYWN0Q29udHJvbCxcbiAgRm9ybUFycmF5LFxuICBGb3JtQ29udHJvbCxcbiAgRm9ybUdyb3VwXG59IGZyb20gXCJAYW5ndWxhci9mb3Jtc1wiO1xuXG5ARGlyZWN0aXZlKHtcbiAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOmRpcmVjdGl2ZS1zZWxlY3RvclxuICBzZWxlY3RvcjogXCJbZm9ybUdyb3VwXVwiXG59KVxuZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0aW9uRGlyZWN0aXZlIHtcbiAgQElucHV0KClcbiAgZm9ybUdyb3VwOiBGb3JtR3JvdXA7XG4gIEBPdXRwdXQoKVxuICB2YWxpZFN1Ym1pdCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gIEBIb3N0TGlzdGVuZXIoXCJzdWJtaXRcIilcbiAgb25TdWJtaXQoKSB7XG4gICAgdGhpcy5tYXJrQXNUb3VjaGVkQW5kRGlydHkodGhpcy5mb3JtR3JvdXApO1xuICAgIGlmICh0aGlzLmZvcm1Hcm91cC52YWxpZCkge1xuICAgICAgdGhpcy52YWxpZFN1Ym1pdC5lbWl0KHRoaXMuZm9ybUdyb3VwLnZhbHVlKTtcbiAgICB9XG4gIH1cblxuICBtYXJrQXNUb3VjaGVkQW5kRGlydHkoY29udHJvbDogQWJzdHJhY3RDb250cm9sKSB7XG4gICAgaWYgKGNvbnRyb2wgaW5zdGFuY2VvZiBGb3JtR3JvdXApIHtcbiAgICAgIE9iamVjdC5rZXlzKGNvbnRyb2wuY29udHJvbHMpLmZvckVhY2goa2V5ID0+XG4gICAgICAgIHRoaXMubWFya0FzVG91Y2hlZEFuZERpcnR5KGNvbnRyb2wuY29udHJvbHNba2V5XSlcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmIChjb250cm9sIGluc3RhbmNlb2YgRm9ybUFycmF5KSB7XG4gICAgICBjb250cm9sLmNvbnRyb2xzLmZvckVhY2goYyA9PiB0aGlzLm1hcmtBc1RvdWNoZWRBbmREaXJ0eShjKSk7XG4gICAgfSBlbHNlIGlmIChjb250cm9sIGluc3RhbmNlb2YgRm9ybUNvbnRyb2wgJiYgY29udHJvbC5lbmFibGVkKSB7XG4gICAgICBjb250cm9sLm1hcmtBc0RpcnR5KCk7XG4gICAgICBjb250cm9sLm1hcmtBc1RvdWNoZWQoKTtcbiAgICAgIGNvbnRyb2wudXBkYXRlVmFsdWVBbmRWYWxpZGl0eSgpO1xuICAgIH1cbiAgfVxufVxuIiwiZXhwb3J0IGVudW0gQm9vdHN0cmFwVmVyc2lvbiB7XG4gIFRocmVlLFxuICBGb3VyXG59XG4iLCJpbXBvcnQgeyBJbmplY3Rpb25Ub2tlbiB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5pbXBvcnQgeyBCb290c3RyYXBWZXJzaW9uIH0gZnJvbSBcIi4uL0VudW1zL0Jvb3RzdHJhcFZlcnNpb25cIjtcbmltcG9ydCB7IEVycm9yTWVzc2FnZSB9IGZyb20gXCIuLi9Nb2RlbHMvZXJyb3ItbWVzc2FnZVwiO1xuXG5leHBvcnQgY29uc3QgQ1VTVE9NX0VSUk9SX01FU1NBR0VTID0gbmV3IEluamVjdGlvblRva2VuPEVycm9yTWVzc2FnZVtdPihcbiAgXCJuZy1ib290c3RyYXAtZm9ybS12YWxpZGF0aW9uIGN1c3RvbSBlcnJvciBtZXNzYWdlc1wiXG4pO1xuXG5leHBvcnQgY29uc3QgQk9PVFNUUkFQX1ZFUlNJT04gPSBuZXcgSW5qZWN0aW9uVG9rZW48Qm9vdHN0cmFwVmVyc2lvbj4oXG4gIFwibmctYm9vdHN0cmFwLWZvcm0tdmFsaWRhdGlvbiBtb2R1bGUgb3B0aW9uc1wiXG4pO1xuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgSW5qZWN0IH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcbmltcG9ydCB7IEJvb3RzdHJhcFZlcnNpb24gfSBmcm9tIFwiLi4vLi4vLi4vbGliL0VudW1zL0Jvb3RzdHJhcFZlcnNpb25cIjtcbmltcG9ydCB7IEJPT1RTVFJBUF9WRVJTSU9OIH0gZnJvbSBcIi4uLy4uL1Rva2Vucy90b2tlbnNcIjtcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiBcImJmdi1tZXNzYWdlc1wiLFxuICB0ZW1wbGF0ZTogYFxuICAgIDxzcGFuIFtuZ0NsYXNzXT1cImNsYXNzTmFtZVwiICpuZ0Zvcj1cImxldCBtZXNzYWdlIG9mIG1lc3NhZ2VzKClcIj57e21lc3NhZ2V9fTwvc3Bhbj5cbiAgYCxcbiAgc3R5bGVzOiBbXG4gICAgYFxuICAgICAgLmludmFsaWQtZmVlZGJhY2ssXG4gICAgICAudmFsaWQtZmVlZGJhY2sge1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgIH1cbiAgICBgXG4gIF1cbn0pXG5leHBvcnQgY2xhc3MgTWVzc2FnZXNDb21wb25lbnQge1xuICBASW5wdXQoKVxuICBwdWJsaWMgbWVzc2FnZXMgPSAoKSA9PiBbXTtcblxuICBnZXQgY2xhc3NOYW1lKCkge1xuICAgIHN3aXRjaCAodGhpcy5ib290c3RyYXBWZXJzaW9uKSB7XG4gICAgICBjYXNlIEJvb3RzdHJhcFZlcnNpb24uVGhyZWU6XG4gICAgICAgIHJldHVybiBcImhlbHAtYmxvY2tcIjtcbiAgICAgIGNhc2UgQm9vdHN0cmFwVmVyc2lvbi5Gb3VyOlxuICAgICAgICByZXR1cm4gXCJpbnZhbGlkLWZlZWRiYWNrXCI7XG4gICAgfVxuICB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgQEluamVjdChCT09UU1RSQVBfVkVSU0lPTikgcHJpdmF0ZSBib290c3RyYXBWZXJzaW9uOiBCb290c3RyYXBWZXJzaW9uXG4gICkge31cbn1cbiIsImltcG9ydCB7IEVycm9yTWVzc2FnZSB9IGZyb20gXCIuL01vZGVscy9lcnJvci1tZXNzYWdlXCI7XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX0VSUk9SUzogRXJyb3JNZXNzYWdlW10gPSBbXG4gIHtcbiAgICBlcnJvcjogXCJyZXF1aXJlZFwiLFxuICAgIGZvcm1hdDogbGFiZWwgPT4gYCR7bGFiZWx9IGlzIHJlcXVpcmVkYFxuICB9LFxuICB7XG4gICAgZXJyb3I6IFwicGF0dGVyblwiLFxuICAgIGZvcm1hdDogbGFiZWwgPT4gYCR7bGFiZWx9IGlzIGludmFsaWRgXG4gIH0sXG4gIHtcbiAgICBlcnJvcjogXCJtaW5sZW5ndGhcIixcbiAgICBmb3JtYXQ6IChsYWJlbCwgZXJyb3IpID0+XG4gICAgICBgJHtsYWJlbH0gbXVzdCBiZSBhdCBsZWFzdCAke2Vycm9yLnJlcXVpcmVkTGVuZ3RofSBjaGFyYWN0ZXJzYFxuICB9LFxuICB7XG4gICAgZXJyb3I6IFwibWF4bGVuZ3RoXCIsXG4gICAgZm9ybWF0OiAobGFiZWwsIGVycm9yKSA9PlxuICAgICAgYCR7bGFiZWx9IG11c3QgYmUgbm8gbG9uZ2VyIHRoYW4gJHtlcnJvci5yZXF1aXJlZExlbmd0aH0gY2hhcmFjdGVyc2BcbiAgfSxcbiAge1xuICAgIGVycm9yOiBcInJlcXVpcmVkVHJ1ZVwiLFxuICAgIGZvcm1hdDogKGxhYmVsLCBlcnJvcikgPT4gYCR7bGFiZWx9IGlzIHJlcXVpcmVkYFxuICB9LFxuICB7XG4gICAgZXJyb3I6IFwiZW1haWxcIixcbiAgICBmb3JtYXQ6IChsYWJlbCwgZXJyb3IpID0+IGBJbnZhbGlkIGVtYWlsIGFkZHJlc3NgXG4gIH0sXG4gIHtcbiAgICBlcnJvcjogXCJtYXhcIixcbiAgICBmb3JtYXQ6IChsYWJlbCwgZXJyb3IpID0+IGAke2xhYmVsfSBtdXN0IGJlIG5vIGdyZWF0ZXIgdGhhbiAke2Vycm9yLm1heH1gXG4gIH0sXG4gIHtcbiAgICBlcnJvcjogXCJtaW5cIixcbiAgICBmb3JtYXQ6IChsYWJlbCwgZXJyb3IpID0+IGAke2xhYmVsfSBtdXN0IGJlIG5vIGxlc3MgdGhhbiAke2Vycm9yLm1pbn1gXG4gIH1cbl07XG4iLCJpbXBvcnQgeyBJbmplY3RhYmxlLCBJbmplY3QgfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuaW1wb3J0IHsgREVGQVVMVF9FUlJPUlMgfSBmcm9tIFwiLi4vZGVmYXVsdC1lcnJvcnNcIjtcbmltcG9ydCB7IENVU1RPTV9FUlJPUl9NRVNTQUdFUyB9IGZyb20gXCIuLi9Ub2tlbnMvdG9rZW5zXCI7XG5pbXBvcnQgeyBFcnJvck1lc3NhZ2UgfSBmcm9tIFwiLi4vTW9kZWxzL2Vycm9yLW1lc3NhZ2VcIjtcblxuQEluamVjdGFibGUoe1xuICBwcm92aWRlZEluOiBcInJvb3RcIlxufSlcbmV4cG9ydCBjbGFzcyBFcnJvck1lc3NhZ2VTZXJ2aWNlIHtcbiAgcHJpdmF0ZSBkZWZhdWx0RXJyb3JzID0gREVGQVVMVF9FUlJPUlM7XG5cbiAgcHVibGljIGVycm9yTWVzc2FnZXM6IEVycm9yTWVzc2FnZVtdO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIEBJbmplY3QoQ1VTVE9NX0VSUk9SX01FU1NBR0VTKSBwdWJsaWMgY3VzdG9tRXJyb3JNZXNzYWdlczogRXJyb3JNZXNzYWdlW11bXVxuICApIHtcbiAgICB0aGlzLmVycm9yTWVzc2FnZXMgPSBjdXN0b21FcnJvck1lc3NhZ2VzLnJlZHVjZShcbiAgICAgIChhY2MsIGN1cikgPT4gYWNjLmNvbmNhdChjdXIpLFxuICAgICAgdGhpcy5kZWZhdWx0RXJyb3JzXG4gICAgKTtcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgQ29tcG9uZW50LFxuICBDb250ZW50Q2hpbGRyZW4sXG4gIENvbnRlbnRDaGlsZCxcbiAgRWxlbWVudFJlZixcbiAgSG9zdEJpbmRpbmcsXG4gIElucHV0LFxuICBRdWVyeUxpc3QsXG4gIE9uSW5pdCxcbiAgQWZ0ZXJDb250ZW50SW5pdFxufSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuaW1wb3J0IHsgRm9ybUNvbnRyb2xOYW1lIH0gZnJvbSBcIkBhbmd1bGFyL2Zvcm1zXCI7XG5pbXBvcnQgeyBFcnJvck1lc3NhZ2VTZXJ2aWNlIH0gZnJvbSBcIi4uLy4uL1NlcnZpY2VzL2Vycm9yLW1lc3NhZ2Uuc2VydmljZVwiO1xuaW1wb3J0IHsgTWVzc2FnZXNDb21wb25lbnQgfSBmcm9tIFwiLi4vbWVzc2FnZXMvbWVzc2FnZXMuY29tcG9uZW50XCI7XG5pbXBvcnQgeyBFcnJvck1lc3NhZ2UgfSBmcm9tIFwiLi4vLi4vTW9kZWxzL2Vycm9yLW1lc3NhZ2VcIjtcblxuQENvbXBvbmVudCh7XG4gIC8vIHRzbGludDpkaXNhYmxlOmNvbXBvbmVudC1zZWxlY3RvclxuICBzZWxlY3RvcjogXCIuZm9ybS1ncm91cFwiLFxuICB0ZW1wbGF0ZTogYFxuICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cbiAgICA8YmZ2LW1lc3NhZ2VzICpuZ0lmPVwiIW1lc3NhZ2VzQmxvY2tcIiBbbWVzc2FnZXNdPVwibWVzc2FnZXNcIj48L2Jmdi1tZXNzYWdlcz5cbiAgYFxufSlcbmV4cG9ydCBjbGFzcyBGb3JtR3JvdXBDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyQ29udGVudEluaXQge1xuICBAQ29udGVudENoaWxkcmVuKEZvcm1Db250cm9sTmFtZSlcbiAgRm9ybUNvbnRyb2xOYW1lczogUXVlcnlMaXN0PEZvcm1Db250cm9sTmFtZT47XG5cbiAgQElucHV0KClcbiAgY3VzdG9tRXJyb3JNZXNzYWdlczogRXJyb3JNZXNzYWdlW10gPSBbXTtcblxuICBASW5wdXQoKVxuICB2YWxpZGF0aW9uRGlzYWJsZWQgPSBmYWxzZTtcblxuICBASG9zdEJpbmRpbmcoXCJjbGFzcy5oYXMtZXJyb3JcIilcbiAgZ2V0IGhhc0Vycm9ycygpIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5Gb3JtQ29udHJvbE5hbWVzLnNvbWUoYyA9PiAhYy52YWxpZCAmJiBjLmRpcnR5ICYmIGMudG91Y2hlZCkgJiZcbiAgICAgICF0aGlzLnZhbGlkYXRpb25EaXNhYmxlZFxuICAgICk7XG4gIH1cblxuICBASG9zdEJpbmRpbmcoXCJjbGFzcy5oYXMtc3VjY2Vzc1wiKVxuICBnZXQgaGFzU3VjY2VzcygpIHtcbiAgICByZXR1cm4gKFxuICAgICAgIXRoaXMuRm9ybUNvbnRyb2xOYW1lcy5zb21lKGMgPT4gIWMudmFsaWQpICYmXG4gICAgICB0aGlzLkZvcm1Db250cm9sTmFtZXMuc29tZShjID0+IGMuZGlydHkgJiYgYy50b3VjaGVkKSAmJlxuICAgICAgIXRoaXMudmFsaWRhdGlvbkRpc2FibGVkXG4gICAgKTtcbiAgfVxuXG4gIEBDb250ZW50Q2hpbGQoTWVzc2FnZXNDb21wb25lbnQpXG4gIHB1YmxpYyBtZXNzYWdlc0Jsb2NrOiBNZXNzYWdlc0NvbXBvbmVudDtcblxuICBwcml2YXRlIGVycm9yTWVzc2FnZXM6IEVycm9yTWVzc2FnZVtdO1xuXG4gIHB1YmxpYyBtZXNzYWdlcyA9ICgpID0+IHRoaXMuZ2V0TWVzc2FnZXMoKTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGVsUmVmOiBFbGVtZW50UmVmLFxuICAgIHByaXZhdGUgZXJyb3JNZXNzYWdlU2VydmljZTogRXJyb3JNZXNzYWdlU2VydmljZVxuICApIHt9XG5cbiAgbmdBZnRlckNvbnRlbnRJbml0KCkge1xuICAgIGlmICh0aGlzLm1lc3NhZ2VzQmxvY2spIHtcbiAgICAgIHRoaXMubWVzc2FnZXNCbG9jay5tZXNzYWdlcyA9IHRoaXMubWVzc2FnZXM7XG4gICAgfVxuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5lcnJvck1lc3NhZ2VzID0gdGhpcy5lcnJvck1lc3NhZ2VTZXJ2aWNlLmVycm9yTWVzc2FnZXNcbiAgICAgIC5jb25jYXQodGhpcy5jdXN0b21FcnJvck1lc3NhZ2VzKVxuICAgICAgLnJldmVyc2UoKTtcbiAgfVxuXG4gIGdldCBsYWJlbCgpIHtcbiAgICBjb25zdCBsYWJlbCA9IHRoaXMuZWxSZWYubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwibGFiZWxcIik7XG4gICAgcmV0dXJuIGxhYmVsICYmIGxhYmVsLnRleHRDb250ZW50ID8gbGFiZWwudGV4dENvbnRlbnQudHJpbSgpIDogXCJUaGlzIGZpZWxkXCI7XG4gIH1cblxuICBnZXQgaXNEaXJ0eUFuZFRvdWNoZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuRm9ybUNvbnRyb2xOYW1lcy5zb21lKGMgPT4gYy5kaXJ0eSAmJiBjLnRvdWNoZWQpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRNZXNzYWdlcygpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgbWVzc2FnZXMgPSBbXTtcbiAgICBpZiAoIXRoaXMuaXNEaXJ0eUFuZFRvdWNoZWQgfHwgdGhpcy52YWxpZGF0aW9uRGlzYWJsZWQpIHtcbiAgICAgIHJldHVybiBtZXNzYWdlcztcbiAgICB9XG5cbiAgICBjb25zdCBuYW1lcyA9IHRoaXMuRm9ybUNvbnRyb2xOYW1lcy5tYXAoZiA9PiBmLm5hbWUpO1xuXG4gICAgdGhpcy5Gb3JtQ29udHJvbE5hbWVzLmZpbHRlcihcbiAgICAgIChjLCBpKSA9PlxuICAgICAgICAhYy52YWxpZCAmJlxuICAgICAgICAhIWMuZXJyb3JzICYmXG4gICAgICAgIC8vIGZpbHRlciBvdXQgRm9ybUNvbnRyb2xOYW1lcyB0aGF0IHNoYXJlIHRoZSBzYW1lIG5hbWUgLSB1c3VhbGx5IGZvciByYWRpbyBidXR0b25zXG4gICAgICAgIG5hbWVzLmluZGV4T2YoYy5uYW1lKSA9PT0gaVxuICAgICkuZm9yRWFjaChjb250cm9sID0+IHtcbiAgICAgIE9iamVjdC5rZXlzKGNvbnRyb2wuZXJyb3JzKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gdGhpcy5lcnJvck1lc3NhZ2VzLmZpbmQoZXJyID0+IGVyci5lcnJvciA9PT0ga2V5KTtcbiAgICAgICAgaWYgKCFlcnJvcikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBtZXNzYWdlcy5wdXNoKGVycm9yLmZvcm1hdCh0aGlzLmxhYmVsLCBjb250cm9sLmVycm9yc1trZXldKSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHJldHVybiBtZXNzYWdlcztcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgRGlyZWN0aXZlLFxuICBJbnB1dCxcbiAgSG9zdEJpbmRpbmcsXG4gIE9wdGlvbmFsLFxuICBIb3N0LFxuICBTa2lwU2VsZixcbiAgSW5qZWN0XG59IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5pbXBvcnQgeyBDb250cm9sQ29udGFpbmVyLCBGb3JtQ29udHJvbCB9IGZyb20gXCJAYW5ndWxhci9mb3Jtc1wiO1xuaW1wb3J0IHsgQm9vdHN0cmFwVmVyc2lvbiB9IGZyb20gXCIuLi9FbnVtcy9Cb290c3RyYXBWZXJzaW9uXCI7XG5pbXBvcnQgeyBCT09UU1RSQVBfVkVSU0lPTiB9IGZyb20gXCIuLi9Ub2tlbnMvdG9rZW5zXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBjb250cm9sUGF0aChuYW1lOiBzdHJpbmcsIHBhcmVudDogQ29udHJvbENvbnRhaW5lcik6IHN0cmluZ1tdIHtcbiAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLW5vbi1udWxsLWFzc2VydGlvblxuICByZXR1cm4gWy4uLnBhcmVudC5wYXRoISwgbmFtZV07XG59XG5cbkBEaXJlY3RpdmUoe1xuICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6ZGlyZWN0aXZlLXNlbGVjdG9yXG4gIHNlbGVjdG9yOiBcIi5mb3JtLWNvbnRyb2wsLmZvcm0tY2hlY2staW5wdXQsLmN1c3RvbS1jb250cm9sLWlucHV0XCJcbn0pXG5leHBvcnQgY2xhc3MgRm9ybUNvbnRyb2xEaXJlY3RpdmUge1xuICBASW5wdXQoKVxuICBmb3JtQ29udHJvbE5hbWU6IHN0cmluZztcbiAgQElucHV0KClcbiAgZm9ybUNvbnRyb2w6IHN0cmluZztcblxuICBASG9zdEJpbmRpbmcoXCJjbGFzcy5pcy12YWxpZFwiKVxuICBnZXQgdmFsaWRDbGFzcygpIHtcbiAgICBpZiAoIXRoaXMuY29udHJvbCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5ib290c3RyYXBGb3VyICYmXG4gICAgICB0aGlzLmNvbnRyb2wudmFsaWQgJiZcbiAgICAgICh0aGlzLmNvbnRyb2wudG91Y2hlZCB8fCB0aGlzLmNvbnRyb2wuZGlydHkpXG4gICAgKTtcbiAgfVxuXG4gIEBIb3N0QmluZGluZyhcImNsYXNzLmlzLWludmFsaWRcIilcbiAgZ2V0IGludmFsaWRDbGFzcygpIHtcbiAgICBpZiAoIXRoaXMuY29udHJvbCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5ib290c3RyYXBGb3VyICYmXG4gICAgICB0aGlzLmNvbnRyb2wuaW52YWxpZCAmJlxuICAgICAgdGhpcy5jb250cm9sLnRvdWNoZWQgJiZcbiAgICAgIHRoaXMuY29udHJvbC5kaXJ0eVxuICAgICk7XG4gIH1cblxuICBnZXQgcGF0aCgpIHtcbiAgICByZXR1cm4gY29udHJvbFBhdGgodGhpcy5mb3JtQ29udHJvbE5hbWUsIHRoaXMucGFyZW50KTtcbiAgfVxuXG4gIGdldCBjb250cm9sKCk6IEZvcm1Db250cm9sIHtcbiAgICByZXR1cm4gdGhpcy5mb3JtRGlyZWN0aXZlICYmIHRoaXMuZm9ybURpcmVjdGl2ZS5nZXRDb250cm9sKHRoaXMpO1xuICB9XG5cbiAgZ2V0IGZvcm1EaXJlY3RpdmUoKTogYW55IHtcbiAgICByZXR1cm4gdGhpcy5wYXJlbnQgPyB0aGlzLnBhcmVudC5mb3JtRGlyZWN0aXZlIDogbnVsbDtcbiAgfVxuXG4gIGdldCBib290c3RyYXBGb3VyKCkge1xuICAgIHJldHVybiB0aGlzLmJvb3RzdHJhcFZlcnNpb24gPT09IEJvb3RzdHJhcFZlcnNpb24uRm91cjtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIC8vIHRoaXMgdmFsdWUgbWlnaHQgYmUgbnVsbCwgYnV0IHdlIHVuaW9uIHR5cGUgaXQgYXMgc3VjaCB1bnRpbFxuICAgIC8vIHRoaXMgaXNzdWUgaXMgcmVzb2x2ZWQ6IGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIvaXNzdWVzLzI1NTQ0XG4gICAgQE9wdGlvbmFsKClcbiAgICBASG9zdCgpXG4gICAgQFNraXBTZWxmKClcbiAgICBwcml2YXRlIHBhcmVudDogQ29udHJvbENvbnRhaW5lcixcbiAgICBASW5qZWN0KEJPT1RTVFJBUF9WRVJTSU9OKSBwcml2YXRlIGJvb3RzdHJhcFZlcnNpb246IEJvb3RzdHJhcFZlcnNpb25cbiAgKSB7fVxufVxuIiwiaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSBcIkBhbmd1bGFyL2NvbW1vblwiO1xuaW1wb3J0IHsgTmdNb2R1bGUsIE1vZHVsZVdpdGhQcm92aWRlcnMgfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuaW1wb3J0IHsgRm9ybVZhbGlkYXRpb25EaXJlY3RpdmUgfSBmcm9tIFwiLi9EaXJlY3RpdmVzL2Zvcm0tdmFsaWRhdGlvbi5kaXJlY3RpdmVcIjtcbmltcG9ydCB7IE1lc3NhZ2VzQ29tcG9uZW50IH0gZnJvbSBcIi4vQ29tcG9uZW50cy9tZXNzYWdlcy9tZXNzYWdlcy5jb21wb25lbnRcIjtcbmltcG9ydCB7IEVycm9yTWVzc2FnZVNlcnZpY2UgfSBmcm9tIFwiLi9TZXJ2aWNlcy9lcnJvci1tZXNzYWdlLnNlcnZpY2VcIjtcbmltcG9ydCB7IENVU1RPTV9FUlJPUl9NRVNTQUdFUywgQk9PVFNUUkFQX1ZFUlNJT04gfSBmcm9tIFwiLi9Ub2tlbnMvdG9rZW5zXCI7XG5pbXBvcnQgeyBCb290c3RyYXBWZXJzaW9uIH0gZnJvbSBcIi4vRW51bXMvQm9vdHN0cmFwVmVyc2lvblwiO1xuaW1wb3J0IHsgRm9ybUdyb3VwQ29tcG9uZW50IH0gZnJvbSBcIi4vQ29tcG9uZW50cy9mb3JtLWdyb3VwL2Zvcm0tZ3JvdXAuY29tcG9uZW50XCI7XG5pbXBvcnQgeyBOZ0Jvb3RzdHJhcEZvcm1WYWxpZGF0aW9uTW9kdWxlT3B0aW9ucyB9IGZyb20gXCIuL01vZGVscy9OZ0Jvb3RzdHJhcEZvcm1WYWxpZGF0aW9uTW9kdWxlT3B0aW9uc1wiO1xuaW1wb3J0IHsgRm9ybUNvbnRyb2xEaXJlY3RpdmUgfSBmcm9tIFwiLi9EaXJlY3RpdmVzL2Zvcm0tY29udHJvbC5kaXJlY3RpdmVcIjtcblxuQE5nTW9kdWxlKHtcbiAgaW1wb3J0czogW0NvbW1vbk1vZHVsZV0sXG4gIGRlY2xhcmF0aW9uczogW1xuICAgIEZvcm1WYWxpZGF0aW9uRGlyZWN0aXZlLFxuICAgIEZvcm1Hcm91cENvbXBvbmVudCxcbiAgICBNZXNzYWdlc0NvbXBvbmVudCxcbiAgICBGb3JtQ29udHJvbERpcmVjdGl2ZVxuICBdLFxuICBleHBvcnRzOiBbXG4gICAgRm9ybVZhbGlkYXRpb25EaXJlY3RpdmUsXG4gICAgRm9ybUdyb3VwQ29tcG9uZW50LFxuICAgIE1lc3NhZ2VzQ29tcG9uZW50LFxuICAgIEZvcm1Db250cm9sRGlyZWN0aXZlXG4gIF1cbn0pXG5leHBvcnQgY2xhc3MgTmdCb290c3RyYXBGb3JtVmFsaWRhdGlvbk1vZHVsZSB7XG4gIHN0YXRpYyBmb3JSb290KFxuICAgIHVzZXJPcHRpb25zOiBOZ0Jvb3RzdHJhcEZvcm1WYWxpZGF0aW9uTW9kdWxlT3B0aW9ucyA9IHtcbiAgICAgIGJvb3RzdHJhcFZlcnNpb246IEJvb3RzdHJhcFZlcnNpb24uRm91clxuICAgIH1cbiAgKTogTW9kdWxlV2l0aFByb3ZpZGVycyB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5nTW9kdWxlOiBOZ0Jvb3RzdHJhcEZvcm1WYWxpZGF0aW9uTW9kdWxlLFxuICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBwcm92aWRlOiBDVVNUT01fRVJST1JfTUVTU0FHRVMsXG4gICAgICAgICAgdXNlVmFsdWU6IHVzZXJPcHRpb25zLmN1c3RvbUVycm9yTWVzc2FnZXMgfHwgW10sXG4gICAgICAgICAgbXVsdGk6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHByb3ZpZGU6IEJPT1RTVFJBUF9WRVJTSU9OLFxuICAgICAgICAgIHVzZVZhbHVlOiB1c2VyT3B0aW9ucy5ib290c3RyYXBWZXJzaW9uXG4gICAgICAgIH0sXG4gICAgICAgIEVycm9yTWVzc2FnZVNlcnZpY2VcbiAgICAgIF1cbiAgICB9O1xuICB9XG59XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7O1FBcUJFLG1CQUNjLElBQUksWUFBWSxFQUFPLENBQUM7Ozs7O0lBR3RDLDBDQUFROzs7SUFEUjtRQUVFLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDM0MsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFD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